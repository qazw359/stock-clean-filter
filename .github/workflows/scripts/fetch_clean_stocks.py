è¿›å£ akshare å¦‚åŒ ak
è¿›å£ç†ŠçŒ«å¦‚åŒèºçº¹ä¸­å¾„
è¿›å£æ“ä½œç³»ç»Ÿï¼ˆOperating Systemï¼‰
ä»æ—¥æœŸæ—¶é—´è¿›å£æ—¥æœŸæ—¶é—´

é»‘åå•_å…³é”®è¯=[
    "åŸºé‡‘", "åŸºé‡‘ç®¡ç†", "æ±‡é‡‘", "è¯é‡‘", "ä¸­å¤®æ±‡é‡‘", "ä¸­å›½è¯åˆ¸é‡‘è",
    "ç¤¾ä¿", "å…¨å›½ç¤¾ä¼šä¿éšœåŸºé‡‘", "å…»è€é‡‘", "åŸºæœ¬å…»è€ä¿é™©",
    "ä¿é™©", "äººå¯¿", "å¹³å®‰", "å¤ªå¹³æ´‹", "äººä¿", "æ³°åº·", "æ–°å", "èµ„ç®¡",
    â€œQFIIâ€, â€œRQFIIâ€, "åˆæ ¼å¢ƒå¤–", "èµ„äº§ç®¡ç†", "åˆ¸å•†", "è‡ªè¥",
    "å›½å®¶é˜Ÿ", "æŠ•èµ„ç®¡ç†", "èµ„æœ¬ç®¡ç†"
]

MIN_PRICE =20
è¾“å‡ºæ–‡ä»¶=" docs/stocks.md "

æ‰“å°("ğŸ“¥ è·å–Aè‚¡åˆ—è¡¨...")
stock_info = akã€‚è‚¡ç¥¨ä¿¡æ¯ä»£ç åç§°()
å¦‚æœè‚¡ç¥¨ä¿¡æ¯ã€‚ç©ºçš„:
    ä¸Šå‡ ä¾‹å¤–("âŒ æ— æ³•è·å–è‚¡ç¥¨åˆ—è¡¨")

# å‰”é™¤ST /é€€å¸‚
è‚¡ç¥¨ä¿¡æ¯=è‚¡ç¥¨ä¿¡æ¯[~è‚¡ç¥¨ä¿¡æ¯['åç§°'].æ½œè‰‡ç”¨çƒ­ä¸­å­ååº”å †ï¼ˆsubmarine thermal reactorçš„ç¼©å†™ï¼‰.åŒ…å«(r'STé€€'ï¼Œæ¡ˆä¾‹=é”™è¯¯çš„ï¼Œna=é”™è¯¯çš„)]

# åªä¿ç•™ä¸»æ¿
æå¥½çš„ æ˜¯ä¸»æ¿(å¯†ç ):
    å¦‚æœä»£ç ã€‚å¼€å§‹äº(('300', '688', '8')):
        è¿”å› é”™è¯¯çš„
    å¦‚æœä»£ç ã€‚å¼€å§‹äº(('000', '001', '002', '600', '601', '603', '605')):
        è¿”å› çœŸå®çš„
    è¿”å› é”™è¯¯çš„

è‚¡ç¥¨ä¿¡æ¯=è‚¡ç¥¨ä¿¡æ¯[è‚¡ç¥¨ä¿¡æ¯[ä»£ç ].åº”ç”¨(æ˜¯ä¸»æ¿)].å¤åˆ¶()
æ‰“å°(f"âœ…ä¸»æ¿éæ ‡å‡†æ—¶é—´(æ ‡å‡†æ—¶é—´)è‚¡ç¥¨æ•°é‡ï¼š{ä½è¾“å…¥è”ç½‘ï¼ˆlow-entry networkingçš„ç¼©å†™ï¼‰(è‚¡ç¥¨ä¿¡æ¯)}")

# è·å–è‚¡ä»·å¹¶è¿‡æ»¤
æ‰“å°("ğŸ’° è·å–å®æ—¶è‚¡ä»·...")
å°è¯•:
Price_df = AKã€‚Aktien _ zh _ a _ spot _ em()
ä»·æ ¼df =ä»·æ ¼df[['ä»£ç ', 'æœ€æ–°ä»·']]
price_dfã€‚åˆ— = [ä»£ç , â€œä»·æ ¼â€]
è‚¡ç¥¨ä¿¡æ¯=è‚¡ç¥¨ä¿¡æ¯ã€‚åˆå¹¶(price_dfï¼Œon=ä»£ç ï¼Œå¦‚ä½•='å·¦')
è‚¡ç¥¨ä¿¡æ¯=è‚¡ç¥¨ä¿¡æ¯[è­¦å¯Ÿã€‚æ”¶ä»¶äºº_æ•°å­—(è‚¡ç¥¨ä¿¡æ¯[â€œä»·æ ¼â€]ï¼Œé”™è¯¯=â€œå¼ºè¿«â€)>æœ€ä½ä»·æ ¼]
    æ‰“å°(f "ğŸ“ˆ è‚¡ä»· >{æœ€ä½ä»·æ ¼} å…ƒçš„è‚¡ç¥¨æ•°é‡: {ä½è¾“å…¥è”ç½‘ï¼ˆlow-entry networkingçš„ç¼©å†™ï¼‰(è‚¡ç¥¨ä¿¡æ¯)}")
é™¤...ä¹‹å¤–ä¾‹å¤–å¦‚åŒe:
    print(f"âš ï¸ è‚¡ä»·è·å–å¤±è´¥ï¼Œè·³è¿‡è¿‡æ»¤: {e}")

# æ£€æŸ¥åå¤§æµé€šè‚¡ä¸œ
clean_stocks =[]
æ€»è®¡=ä½è¾“å…¥è”ç½‘ï¼ˆlow-entry networkingçš„ç¼©å†™ï¼‰(è‚¡ç¥¨ä¿¡æ¯)
ä¸ºidxï¼Œä¸–ç•Œå…¶ä»–åœ°åŒºåœ¨è‚¡ç¥¨ä¿¡æ¯ã€‚iterrows():
ä»£ç =è¡Œ[ä»£ç ]
    å°è¯•:
df = akã€‚stock_gdfx_top_10_em(ç¬¦å·=ä»£ç )
        å¦‚æœ ä¸dfã€‚ç©ºçš„:
has _æœºæ„=ä»»ä½•çš„(
                ä»»ä½•çš„(åƒç“¦åœ¨ æ½œè‰‡ç”¨çƒ­ä¸­å­ååº”å †ï¼ˆsubmarine thermal reactorçš„ç¼©å†™ï¼‰(åå­—) ä¸ºåƒç“¦åœ¨é»‘åå•_å…³é”®è¯)
                ä¸ºåå­—åœ¨df['è‚¡ä¸œåç§°']
            )
            å¦‚æœhas _æœºæ„:
                ç»§ç»­
å¹²å‡€çš„è‚¡ç¥¨ã€‚é™„åŠ ((ä»£ç ï¼Œä¸–ç•Œå…¶ä»–åœ°åŒº['åç§°']ï¼Œæ’ã€‚å¾—åˆ°(â€œä»·æ ¼â€, 'ä¸é€‚ç”¨')))
    é™¤...ä¹‹å¤–:
        ç»§ç»­

# ç”Ÿæˆç½‘é¡µ
date_str = datetime.now().strftime("%Y-%m-%d")
content = f"""# æ— æœºæ„æŒä»“ Â· ä¸»æ¿ Â· é«˜è‚¡ä»·è‚¡ç¥¨æ± ï¼ˆæ¯æ—¥æ›´æ–°ï¼‰

> **æ›´æ–°æ—¶é—´**ï¼š{date_str}  
> **ç­›é€‰è§„åˆ™**ï¼š
> - ä»…æ²ª/æ·±ä¸»æ¿ï¼ˆå‰”é™¤åˆ›ä¸šæ¿300ã€ç§‘åˆ›æ¿688ã€åŒ—äº¤æ‰€8ï¼‰
> - å‰”é™¤ST / *ST /é€€å¸‚è‚¡
> - å½“å‰è‚¡ä»· > {> - å½“å‰è‚¡ä»·> {MIN_PRICE}å…ƒ} å…ƒ
> - åå¤§æµé€šè‚¡ä¸œä¸­ä¸å«å…¬å‹ŸåŸºé‡‘ã€ç¤¾ä¿ã€ä¿é™©ã€QFIIã€å›½å®¶é˜Ÿç­‰
> - **å½“å‰æ•°é‡**ï¼š{ä½è¾“å…¥è”ç½‘ï¼ˆlow-entry å»ºç«‹å·¥ä½œå…³ç³»ç½‘çš„ç¼©å†™)(> - **å½“å‰æ•°é‡* *{ len(clean _ stocks)}åª)} åª

| ä»£ç  | åç§° | è‚¡ä»· |
|------|------|------|
"""

ä¸ºå¯¹äºæ¸…æ´_åº“å­˜ä¸­çš„ä»£ç ã€åç§°å’Œä»·æ ¼ï¼šåœ¨æ¸…æ´_åº“å­˜:
link = f "https://quote .ä¸œæ–¹è´¢å¯Œç½‘. com/sh { code }ã€‚è¶…æ–‡æœ¬æ ‡è®°è¯­è¨€â€œå¦‚æœä»£ç ã€‚ä»¥(' 6 ')else f " https://quoteå¼€å¤´ã€‚ä¸œæ–¹è´¢å¯Œç½‘ã€‚com/SZ { code } .html " f " https://quote . eastmoney . com/sh { code }ã€‚html " if code . starts with(' 6 ')else f " https://quote . eastmoney . com/SZ { code }ã€‚html "
content+= f "[{ code }]({ link }){ name } { price } n " f "[{ code }]({ link }){ name } { price } n "

osã€‚é©¬å…‹è¿ªå°”æ–¯("æ–‡æ¡£"ï¼Œexist_ok=True)makedirs("docs "ï¼Œexist_ok=True)
éšç€ç”¨open(OUTPUT_FILEï¼Œ" w "ï¼Œencoding="utf-8 ")ä½œä¸ºf:open(OUTPUT_FILEï¼Œ" w "ï¼Œencoding="utf-8") as f:
f .å†™(å†…å®¹)å†™(å†…å®¹)

print(f"âœ… å®Œæˆï¼å…± {len(print(f"âœ…å®Œæˆï¼å…±{len(clean_stocks)}åªç¬¦åˆæ¡ä»¶çš„è‚¡ç¥¨"))} åªç¬¦åˆæ¡ä»¶çš„è‚¡ç¥¨")
